{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme=" " id="htmlPage">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>

    <!--font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
        integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- boostrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">


    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- custom css -->
    <link rel="stylesheet" href="{% static 'admin_inventory/styles.css' %}">


</head>

<body>
    <div class="wrapper">
        <!-- sidemenu component-->
        {% include 'components/sidemenu.html' %}

        <div class="main">
            <!-- navbar component -->
            {% include 'components/navbar.html' %}

            <div id="content-container" class="container mt-3 p-4">

                <div class="d-flex justify-content-start mb-5">
                    <img src="assets/inventory.png" alt="inventory icon" style="width: 2em; height: 2em;">
                    <h4 class="m-0 ps-3">Inventory</h4>
                </div>

                <nav class="navbar navbar-expand-lg bg-body mb-3">
                    <div class="container-fluid">
                        <div class="input-group" style="width: 15rem;">
                            <span class="input-group-text d-lg-block d-none bg-body" style="border: none;">
                                <i class="fa-solid fa-magnifying-glass"></i></span>
                            <input class="form-control search-btn" type="text" placeholder="Search..."
                                style=" border: none;">
                        </div>

                        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                            aria-labelledby="offcanvasNavbarLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Options</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"
                                    aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body d-flex justify-content-lg-end">
                                <ul class="navbar-nav grid gap-3">
                                    <li class="nav-item d-flex align-items-center">
                                        <div class="d-flex">
                                            <p class="m-0 me-2">Showing</p>
                                            <select class="show-select text-dark" name="rownum">
                                                <option selected value="1">By Good Condition</option>
                                                <option value="2">By No Barcode Tag</option>
                                                <option value="3">By For Repair</option>
                                                <option value="4">By For Disposal</option>
                                            </select>
                                        </div>
                                    </li>
                                    <li class="nav-item">
                                        <div class="dropdown">
                                            <a class="btn btn-outline-secondary dropdown-toggle" href="#" role="button"
                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="fa-regular fa-calendar-days"></i>
                                                &nbsp;
                                                Filter
                                            </a>

                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="?status=1">By Good Condition</a></li>
                                                <li><a class="dropdown-item" href="?status=2">By No Barcode Tag</a></li>
                                                <li><a class="dropdown-item" href="?status=3">By For Repair</a></li>
                                                <li><a class="dropdown-item" href="?status=4">By For Disposal</a></li>
                                            </ul>
                                        </div>
                                    </li>

                                    <li class="nav-item">
                                        <button type="button" class="btn btn-outline-secondary"><i
                                                class="fa-solid fa-file-export"></i>&nbsp;&nbsp;Export</button>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- table -->
                <div class="card p-3 card-table">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col" style="font-weight: 500;">Barcode</th>
                                <th scope="col" style="font-weight: 500;">C-Code</th>
                                <th scope="col" style="font-weight: 500;">Title</th>
                                <th scope="col" style="font-weight: 500;">Author</th>
                                <th scope="col" style="font-weight: 500;">Reviewed By</th>
                                <th scope="col" style="font-weight: 500;">Previously Checked</th>
                                <th scope="col" style="font-weight: 500;">Latest Checked</th>
                                <th scope="col" style="font-weight: 500;">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in inventoryData %}
                            <tr data-bs-toggle="modal" data-bs-target="#modal_inventory">
                                <td class="text-truncate" style="max-width: 150px;">{{ item.book.barcode }}</td>
                                <th scope="row">{{ item.book.col_code }}</th>
                                <td class="text-truncate" style="max-width: 150px;">{{ item.book.title }}</td>
                                <td class="text-truncate" style="max-width: 150px;">{{ item.book.author }}</td>
                                <td class="text-truncate" style="max-width: 150px;">{{ item.reviewed_by }}</td>
                                <td class="text-truncate" style="max-width: 150px;">{{ item.previously_checked|date:"Y-m-d" }}</td>
                                <td class="text-truncate" style="max-width: 150px;">{{ item.datetime_checked|date:"Y-m-d" }}</td>
                                <td class="text-truncate" style="max-width: 150px;">
                                    {% if item.status == 1 %}
                                        <p class="badge text-bg-success">Good Condition</p>
                                    {% elif item.status == 2 %}
                                        <p class="badge text-bg-warning">No Barcode Tag</p>
                                    {% elif item.status == 3 %}
                                        <p class="badge text-bg-warning">For Repair</p>
                                    {% elif item.status == 4 %}
                                        <p class="badge text-bg-danger">For Disposal</p>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- pagination -->
                <nav>
                    <ul class="pagination justify-content-center mt-4 mb-4 grid gap-2">
                        {% if inventoryData.has_previous %}
                        <li class="nav-item">
                            <a href="?page={{ inventoryData.previous_page_number }}&show={{ request.GET.show|default:'10' }}&search={{ search_query }}&status={{ status_filter }}" class="text-body">&laquo;</a>
                        </li>
                        {% endif %}

                        {% for page_num in page_range %}
                            <li class="nav-item">
                                <a href="?page={{ page_num }}&show={{ request.GET.show|default:'10' }}&search={{ search_query }}&status={{ status_filter }}" 
                                   class="{% if page_num == current_page %}active{% endif %} text-body">
                                    {{ page_num }}
                                </a>
                            </li>
                        {% endfor %}

                        {% if inventoryData.has_next %}
                        <li class="nav-item">
                            <a href="?page={{ inventoryData.next_page_number }}&show={{ request.GET.show|default:'10' }}&search={{ search_query }}&status={{ status_filter }}" class="text-body">&raquo;</a>
                        </li>
                        {% endif %}
                    </ul>
                </nav>
            </div>

            <!-- Show book details (Modal) -->
            <div class="modal fade" id="modal_inventory" tabindex="-1" data-bs-backdrop="static">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <i class="fa-solid fa-table-cells-large"></i>
                            &nbsp;
                            &nbsp;
                            <h6 class="modal-title fs-5" id="modal_bookdetails">Inventory</h6>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <!-- book details -->
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#book-details" aria-expanded="true"
                                            aria-controls="book-details">
                                            <i class="fa-solid fa-circle-info"></i>
                                            &nbsp;
                                            Book Details
                                        </button>
                                    </h2>
                                    <div id="book-details" class="accordion-collapse collapse show"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="title-subtitle">
                                                <span class="d-flex grid gap-1">

                                                    <h5 style="font-weight: 400;">
                                                        Emergency management for sports and physical activity
                                                    </h5>
                                                    <h5 style="font-weight: 400;">(Subtitle)</h6>
                                                </span>
                                            </div>

                                            <div class="author">
                                                <span class="d-flex">
                                                    <p>Author(s): </p>
                                                    &nbsp;
                                                    <div class="author-value">
                                                        <p>Casa, Douglas J.</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="publisher">
                                                <span class="d-flex">
                                                    <p>Publisher: </p>
                                                    &nbsp;
                                                    <div class="publisher-value">
                                                        <p>Jones & Bartlett Learning</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="publication-date">
                                                <span class="d-flex">
                                                    <p>Copyright: </p>
                                                    &nbsp;
                                                    <div class="copyright-value">
                                                        <p>2019</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="isbn">
                                                <span class="d-flex">
                                                    <p>ISBN: </p>
                                                    &nbsp;
                                                    <div class="isbn-value">
                                                        <p>978-1-284-02216-2 (pbk)</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="collection-code">
                                                <span class="d-flex">
                                                    <p>Collection Code: </p>
                                                    &nbsp;
                                                    <div class="cc-value">
                                                        <p>DC</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="itype">
                                                <span class="d-flex">
                                                    <p>Itype: </p>
                                                    &nbsp;
                                                    <div class="itype-value">
                                                        <p>DC</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="item-call-num">
                                                <span class="d-flex">
                                                    <p>Item Call Number: </p>
                                                    &nbsp;
                                                    <div class="itemcallnum-value">
                                                        <p>DC 332.178 Sch312 2014</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="date-accessioned">
                                                <span class="d-flex">
                                                    <p>Date Accessioned: </p>
                                                    &nbsp;
                                                    <div class="date-accessioned-value">
                                                        <p>2015-08-24</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="copy-num">
                                                <span class="d-flex">
                                                    <p>Copy Number: </p>
                                                    &nbsp;
                                                    <div class="copy-number">
                                                        <p>1</p>
                                                    </div>
                                                </span>
                                            </div>


                                            <div class="copy-num">
                                                <span class="d-flex">
                                                    <p>Volume: </p>
                                                    &nbsp;
                                                    <div class="volume-number">
                                                        <p>Volume 1</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="edition-stmt">
                                                <span class="d-flex">
                                                    <p>Edition Statement: </p>
                                                    &nbsp;
                                                    <div class="edition-number">
                                                        <p>Seventh Edition</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="paidfor-num">
                                                <span class="d-flex">
                                                    <p>Paid for: </p>
                                                    &nbsp;
                                                    <div class="paidfor-value">
                                                        <p>None</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="price-num">
                                                <span class="d-flex">
                                                    <p>Price: </p>
                                                    &nbsp;
                                                    <div class="price-value">
                                                        <p>None</p>
                                                    </div>
                                                </span>
                                            </div>

                                            <div class="price-num">
                                                <span class="d-flex">
                                                    <p>Book Seller: </p>
                                                    &nbsp;
                                                    <div class="purchased-value">
                                                        <p>Purchased</p>
                                                    </div>
                                                </span>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h5 class="mt-5 mb-3">
                                &nbsp;
                                <i class="fa-solid fa-clock-rotate-left"></i>
                                History
                            </h5>
                            <div class="card">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col" style="font-weight: 500;">Reviewed By</th>
                                            <th scope="col" style="font-weight: 500;">Previously Checked</th>
                                            <th scope="col" style="font-weight: 500;">Latest Checked</th>
                                            <th scope="col" style="font-weight: 500;">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- sample data -->

                                        <tr>
                                            <td class="text-truncate" style="max-width: 150px;">Cristian Pesongco
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">2024-09-24
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">2024-09-25
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">
                                                <p class="badge text-bg-success">Good Condition </p>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="text-truncate" style="max-width: 150px;">Cristian Pesongco
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">2024-09-24
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">2024-09-25
                                            </td>
                                            <td class="text-truncate" style="max-width: 150px;">
                                                <p class="badge text-bg-warning">For Repair</p>
                                            </td>
                                        </tr>
                                        <!-- sample data -->


                                    </tbody>
                                </table>
                            </div>


                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-primary"> <i
                                    class="fa-solid fa-print"></i>&nbsp; Print</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>
    <!-- boostrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

</body>
  <script src="{% static 'admin_inventory/function.js' %}"></script>
  <script>
    document.querySelector('.show-select').addEventListener('change', function () {
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.set('show', this.value);
        if ('{{ search_query }}') {
            urlParams.set('search', '{{ search_query }}');
        }
        if ('{{ collection_filter }}') {
            urlParams.set('book-collections', '{{ collection_filter }}');
        }
        if ('{{ decimal_start }}') {
            urlParams.set('item-decimal-start', '{{ decimal_start }}');
        }
        if ('{{ decimal_end }}') {
            urlParams.set('item-decimal-end', '{{ decimal_end }}');
        }
        if ('{{ year_start }}') {
            urlParams.set('year-start', '{{ year_start }}');
        }
        if ('{{ year_end }}') {
            urlParams.set('year-end', '{{ year_end }}');
        }
        window.location.search = urlParams.toString();
    });


    const hamBurger = document.querySelector(".toggle-btn");

    hamBurger.addEventListener("click", function () {
        document.querySelector("#sidebar").classList.toggle("expand");
    });

</script>


</html>
